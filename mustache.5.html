<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.5'>
  <title>mustache(5) -- Logic-less templates.</title>
  <style type='text/css'>
    body {margin:0}
    #man, #man code, #man pre, #man tt, #man kbd, #man samp {
      font-family:consolas,monospace;
      font-size:16px;
      line-height:1.3;
      color:#343331;
      background:#fff; }
    #man { max-width:89ex; text-align:justify; margin:0 25px 25px 25px }
    #man h1, #man h2, #man h3 { color:#232221;clear:left }
    #man h1 { font-size:28px; margin:15px 0 30px 0; text-align:center }
    #man h2 { font-size:18px; margin-bottom:0; margin-top:10px; line-height:1.3; }
    #man h3 { font-size:16px; margin:0 0 0 4ex; }
    #man p, #man ul, #man ol, #man dl, #man pre { margin:0 0 18px 0; }
    #man pre {
      color:#333231;
      background:#edeceb;
      padding:5px 7px;
      margin:0px 0 20px 0;
      border-left:2ex solid #ddd}
    #man pre + h2, #man pre + h3 {
      margin-top:22px;
    }
    #man h2 + pre, #man h3 + pre {
      margin-top:5px;
    }
    #man > p, #man > ul, #man > ol, #man > dl, #man > pre { margin-left:8ex; }
    #man dt { margin:0; clear:left }
    #man dt.flush { float:left; width:8ex }
    #man dd { margin:0 0 0 9ex }
    #man code, #man strong, #man b { font-weight:bold; color:#131211; }
    #man pre code { font-weight:normal; color:#232221; background:inherit }
    #man em, var, u {
      font-style:normal; color:#333231; border-bottom:1px solid #999; }
    #man h1.man-title { display:none; }
    #man ol.man, #man ol.man li { margin:2px 0 10px 0; padding:0;
      float:left; width:33%; list-style-type:none;
      text-transform:uppercase; font-size:18px; color:#999;
      letter-spacing:1px;}
    #man ol.man { width:100%; }
    #man ol.man li.tl { text-align:left }
    #man ol.man li.tc { text-align:center;letter-spacing:4px }
    #man ol.man li.tr { text-align:right }
    #man ol.man a { color:#999 }
    #man ol.man a:hover { color:#333231 }
  </style>
</head>
<body>
<div id='man'>

<h1 class='man-title'>mustache(5)</h1>

<ol class='head man'>
  <li class='tl'>mustache(5)</li>
  <li class='tc'>Mustache Manual</li>
  <li class='tr'>mustache(5)</li>
</ol>

<h2 id='NAME'>名称(NAME)</h2>
<p><code>mustache</code> -- 轻逻辑模版语言。</p>

<h2>大纲(SYNOPSIS)</h2>

<p>一个典型的Mustache模版实例：</p>

<pre><code>Hello {{name}}
You have just won ${{value}}!
{{#in_ca}}
Well, ${{taxed_value}}, after taxes.
{{/in_ca}}
</code></pre>

<p>绑定以下键值的集合：</p>

<pre><code>{
  "name": "Chris",
  "value": 10000,
  "taxed_value": 10000 - (10000 * 0.4),
  "in_ca": true
}
</code></pre>

<p>会生成:</p>

<pre><code>Hello Chris
You have just won $10000!
Well, $6000.0, after taxes.
</code></pre>

<h2>简介(DESCRIPTION)</h2>

<p>Mustache 可以用于HTML，配置文件、程序代码等，核心机制就是把模版中的tags替换为通过hash or object给定的值。</p>

<p>我们称之为“轻逻辑”是因为模版语言中没有if、else 和 for循环，只有tags。一些tags会被替换为一个值，还有一些会被替换为一列值。本本会介绍Mustache不同种类的tags.</p>

<h2>TAG的种类(TAG TYPES)</h2>

<p>Tags用双尖括号标记，<code>{{person}}</code>就是一个tag，<code>{{#person}}</code>也是。在所有示例中，我们都将用<code>person</code>作为属性名或tag的名称。下面开始介绍不通种类的tags.</p>

<h3>变量(Variables)</h3>

<p>最基础的tag就是变量。模版中的tag <code>{{name}}</code>会在当前上下文中匹配名为<code>name</code>的值。如果没有找到，就不会输出。</p>

<p>所有值的输出默认是经过HTML编码的。如果想输出原文，可以使用三重尖括号的标记：<code>{{{name}}}。</code></p>

<p>也可以使用 <code>&amp;</code> 来标记原文输出：<code>{{&amp; name}}</code>。这种方式在changing delimiters的时候可能有用(see “Set Delimiter” below)。</p>

<p>如果匹配某个值失败会返回一个空字符串。Ruby版本的Mustache在这种情况下可以抛出异常，例如：</p>

<p>模版:</p>

<pre><code>* {{name}}
* {{age}}
* {{company}}
* {{{company}}}
</code></pre>

<p>键值:</p>

<pre><code>{
  "name": "Chris",
  "company": "&lt;b&gt;GitHub&lt;/b&gt;"
}
</code></pre>

<p>输出:</p>

<pre><code>* Chris
*
* &amp;lt;b&amp;gt;GitHub&amp;lt;/b&amp;gt;
* &lt;b&gt;GitHub&lt;/b&gt;
</code></pre>

<h3>Sections</h3>

<p>Sections render blocks of text one or more times, depending on the
value of the key in the current context.</p>

<p>Sections可以根据当前上下文中的键值来渲染文本块一次或更多次，Sections以<code>#</code>开始、以<code>/</code>结束，比如<code>{{#person}}…{{/person}}</code>。
</p>

<p>Sections的行为由给定的键值决定</p>

<p><strong>False 或 空列表</strong></p>

<p>如果名为<code>person</code>的值为false或为空，Sections将不会输出任何字符。</p>

<p>模版:</p>

<pre><code>Shown.
{{#nothin}}
  Never shown!
{{/nothin}}
</code></pre>

<p>键值:</p>

<pre><code>{
  "person": true,
}
</code></pre>

<p>输出:</p>

<pre><code>Shown.
</code></pre>

<p><strong>非空的列表</strong></p>

<p>如果名为<code>person</code>的值不为false，Sections内部的字符将会输出一次或多次。</p>

<p>当值是为空的列表时，与列表中的每个条目对应的字符都会显示出来。每次迭代的时候上下文会从区块切换到对应的没一个条目，这样我们就可以遍历一个集合了。</p>

<p>模版:</p>

<pre><code>{{#repo}}
  &lt;b&gt;{{name}}&lt;/b&gt;
{{/repo}}
</code></pre>

<p>键值:</p>

<pre><code>{
  "repo": [
    { "name": "resque" },
    { "name": "hub" },
    { "name": "rip" },
  ]
}
</code></pre>

<p>输出:</p>

<pre><code>&lt;b&gt;resque&lt;/b&gt;
&lt;b&gt;hub&lt;/b&gt;
&lt;b&gt;rip&lt;/b&gt;
</code></pre>

<p><strong>Lambdas</strong></p>

<p>当给定的值为object，例如 「function」 或 lambda, object会被调用并传进区块。被传递进区块的是未经编译的字符串。. <code>{{tags}}</code> 此时还没有被替换
- lambda 将自行决定，用这种方式我们可以实现过滤和缓存。</p>

<p>模版:</p>

<pre><code>{{#wrapped}}
  {{name}} is awesome.
{{/wrapped}}
</code></pre>

<p>键值:</p>

<pre><code>{
  "name": "Willy",
  "wrapped": function() {
    return function(text) {
      return "&lt;b&gt;" + render(text) + "&lt;/b&gt;"
    }
  }
}
</code></pre>

<p>输出:</p>

<pre><code>&lt;b&gt;Willy is awesome.&lt;/b&gt;
</code></pre>

<p><strong>非False的值</strong></p>

<p>一个不是列表并且不为空的值，会被用来进行单一的渲染。</p>

<p>模版:</p>

<pre><code>{{#person?}}
  Hi {{name}}!
{{/person?}}
</code></pre>

<p>键值:</p>

<pre><code>{
  "person?": { "name": "Jon" }
}
</code></pre>

<p>输出:</p>

<pre><code>Hi Jon!
</code></pre>

<h3>反向的Sections(Inverted Sections)</h3>

<p>反向的区块以「^」开始、以「/」结束，比如 <code>{{^person}}…{{/person}}</code></p>

<p>While sections can be used to render text one or more times based on the
value of the key, inverted sections may render text once based
on the inverse value of the key. 当给定的值不存在、为空或false的时候，反向的区块会被渲染。</p>

<p>模版:</p>

<pre><code>{{#repo}}
  &lt;b&gt;{{name}}&lt;/b&gt;
{{/repo}}
{{^repo}}
  No repos :(
{{/repo}}
</code></pre>

<p>键值:</p>

<pre><code>{
  "repo": []
}
</code></pre>

<p>输出:</p>

<pre><code>No repos :(
</code></pre>

<h3>注释</h3>

<p>以「!」开始的注释文字将会被忽略:</p>

<pre><code>&lt;h1&gt;Today{{! ignore me }}.&lt;/h1&gt;
</code></pre>

<p>会被渲染成:</p>

<pre><code>&lt;h1&gt;Today.&lt;/h1&gt;
</code></pre>

<p>注释可以换行。</p>

<h3>子模版</h3>

<p>子模版以「>」标记开始，比如 <code>{{&gt; box}}</code>.</p>

<p>子模版的渲染是即时的，所以对子模版的递归是可行的，避免了无尽的循环。</p>

<p>子模版还会集成调用的长下文，在 ERB 你可能见过这种code:</p>

<pre><code>&lt;%= partial :next_more, :start =&gt; start, :size =&gt; size %&gt;
</code></pre>

<p>Mustache 只需要:</p>

<pre><code>{{&gt; next_more}}
</code></pre>

<p>因为<code>next_more.mustache</code> 会继承调用时上下文的<code>size</code>和<code>start</code>方法.</p>

<p>也许你会发现子模版和 includes、template扩展很像，尽管和字面上的描述不太一致。</p>

<p>例如，如下的模版和子模版:</p>

<pre><code>base.mustache:
&lt;h2&gt;Names&lt;/h2&gt;
{{#names}}
  {{&gt; user}}
{{/names}}

user.mustache:
&lt;strong&gt;{{name}}&lt;/strong&gt;
</code></pre>

<p>可以认为看成一个合成的模版:</p>

<pre><code>&lt;h2&gt;Names&lt;/h2&gt;
{{#names}}
  &lt;strong&gt;{{name}}&lt;/strong&gt;
{{/names}}
</code></pre>

<h3>设置分隔符</h3>

<p>以「=」开始的tag 可以标记 <code>{{</code> 和 <code>}}</code> 中间的字符为自定义字符。.</p>

<p>Consider the following contrived example:</p>

<pre><code>* {{default_tags}}
{{=&lt;% %>=}}
* &lt;% erb_style_tags %>
&lt;%={{ }}=%>
* {{ default_tags_again }}
</code></pre>

<p>Here we have a list with three items. The first item uses the default
tag style, the second uses erb style as defined by the Set Delimiter
tag, and the third returns to the default style after yet another Set
Delimiter declaration.</p>

<p>引自 <a href="http://google-ctemplate.googlecode.com/svn/trunk/doc/howto.html">ctemplates</a>, this "is useful for languages like TeX, where
double-braces may occur in the text and are awkward to use for
markup."</p>

<p>自定义字符不能包含空格和等号。</p>

<h2>COPYRIGHT</h2>

<p>Mustache is Copyright (C) 2009 Chris Wanstrath</p>

<p>Original CTemplate by Google</p>

<h2>SEE ALSO</h2>

<p>mustache(1), mustache(7),
<a href="http://mustache.github.com/">http://mustache.github.com/</a></p>


<ol class='foot man'>
  <li class='tl'>DEFUNKT</li>
  <li class='tc'>April 2010</li>
  <li class='tr'>mustache(5)</li>
</ol>

</div>
</body>
</html>
